# python3
from collections import deque

"""
Ð’Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ Ð² Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ
Ð”Ð°Ð½Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ ð‘Ž1 ,. ... ..., ð‘Žð‘› Ñ†ÐµÐ»Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ» Ð¸ Ñ†ÐµÐ»Ð¾Ð³Ð¾ ð‘š â‰¤ ð‘›,
Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ ÑÑ€ÐµÐ´Ð¸ {ð‘Žð‘– ,. ... ..., ð‘Žð‘– + ð‘š - 1} Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ 1 â‰¤ ð‘– â‰¤ ð‘› - ð‘š + 1.
ÐÐ°Ð¸Ð²Ð½Ñ‹Ð¹ Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ ð‘‚ (ð‘›ð‘š) Ð´Ð»Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ ÑÑ‚Ð¾Ð¹ Ð·Ð°Ð´Ð°Ñ‡Ð¸ ÑÐºÐ°Ð½Ð¸Ñ€ÑƒÐµÑ‚ ÐºÐ°Ð¶Ð´Ð¾Ðµ Ð¾ÐºÐ½Ð¾ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾. Ð’Ð°ÑˆÐ° Ñ†ÐµÐ»ÑŒ - Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ ð‘‚ (ð‘›).


ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹
Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð²Ð²Ð¾Ð´Ð°.
Ð’ Ð¿ÐµÑ€Ð²Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐµ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾ Ñ†ÐµÐ»Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾ ð‘›, Ð²Ð¾ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐµ - ð‘› Ñ†ÐµÐ»Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ» ð‘Ž1,. . . , ð‘Žð‘› Ñ‡ÐµÑ€ÐµÐ· Ð¿Ñ€Ð¾Ð±ÐµÐ»,
Ð² Ñ‚Ñ€ÐµÑ‚ÑŒÐµÐ¹ ÑÑ‚Ñ€Ð¾ÐºÐµ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾ Ñ†ÐµÐ»Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ 1
8
2 7 3 1 5 2 6 2
4


Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ
ÐœÑ‹ Ð´Ð°ÐµÐ¼ Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸ Ð´Ð»Ñ Ñ‚Ñ€ÐµÑ… Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹.
1. Ð ÐµÐ°Ð»Ð¸Ð·ÑƒÐ¹Ñ‚Ðµ Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ Ð´Ð²Ð° ÑÑ‚ÐµÐºÐ°.
Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰ÐµÐ½Ð¸Ñ Ð¾ÐºÐ½Ð° Ð¿Ð¾ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸:
Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ´Ð²Ð¸Ð½ÑƒÑ‚ÑŒ Ð¾ÐºÐ½Ð¾ Ð½Ð° Ð¾Ð´Ð½Ñƒ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ Ð²Ð¿Ñ€Ð°Ð²Ð¾, Ð²Ñ‹Ñ‚Ð¾Ð»ÐºÐ½Ð¸Ñ‚Ðµ ÐºÑ€Ð°Ð¹Ð½Ð¸Ð¹ Ð»ÐµÐ²Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸ Ð¸
Ð²Ñ‹Ñ‚Ð¾Ð»ÐºÐ½Ð¸Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¸Ð· Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð°.
ÐžÑ‡ÐµÑ€ÐµÐ´ÑŒ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð° Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð´Ð²ÑƒÑ… ÑÑ‚ÐµÐºÐ¾Ð²,
Ñ‚Ð°Ðº Ñ‡Ñ‚Ð¾ ÐºÐ°Ð¶Ð´Ð°Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸ Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð² ÑÑ€ÐµÐ´Ð½ÐµÐ¼ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ.
Ð—Ð°Ñ‚ÐµÐ¼ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐ²Ð¾ÑŽ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ ÑÑ‚ÐµÐºÐ° Ñ max.
2. ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÑÑƒÑ„Ñ„Ð¸ÐºÑÐ¾Ð² Ð¸ Ð¿Ñ€ÐµÑ„Ð¸ÐºÑÐ¾Ð² Ð±Ð»Ð¾ÐºÐ¾Ð².
Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚Ðµ Ð²Ñ…Ð¾Ð´Ð½ÑƒÑŽ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð½Ð° Ð±Ð»Ð¾ÐºÐ¸ Ð´Ð»Ð¸Ð½Ð¾Ð¹ ð‘š Ð¸ Ð¿Ñ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð²Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚Ðµ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑÑƒÑ„Ñ„Ð¸ÐºÑÐ°
Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¿Ñ€ÐµÑ„Ð¸ÐºÑÐ° ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð±Ð»Ð¾ÐºÐ°. Ð’Ð¿Ð¾ÑÐ»ÐµÐ´ÑÑ‚Ð²Ð¸Ð¸ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¼ ÑÐºÐ¾Ð»ÑŒÐ·ÑÑ‰ÐµÐ¼ Ð¾ÐºÐ½Ðµ Ð¼Ð¾Ð¶Ð½Ð¾ Ð½Ð°Ð¹Ñ‚Ð¸,
Ñ€Ð°ÑÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°Ñ ÑÑƒÑ„Ñ„Ð¸ÐºÑ Ð¸ Ð¿Ñ€ÐµÑ„Ð¸ÐºÑ Ð´Ð²ÑƒÑ… Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð±Ð»Ð¾ÐºÐ¾Ð².
3. Ð¥Ñ€Ð°Ð½Ð¸Ñ‚Ðµ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð² Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ Ð¸Ð· Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸.
Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð´Ð²ÑƒÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½ÑŽÑŽ Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ (dequeue) Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¾ÐºÐ½Ð°.
ÐŸÑ€Ð¸ ÑÑ‚Ð¾Ð¼ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐ¹Ñ‚Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ€ÐµÐ»ÐµÐ²Ð°Ð½Ñ‚Ð½Ñ‹Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹: Ð¿ÐµÑ€ÐµÐ´ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼ Ð½Ð¾Ð²Ð¾Ð³Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð¾Ñ‚Ð±Ñ€Ð¾ÑÑŒÑ‚Ðµ Ð²ÑÐµ Ð±Ð¾Ð»ÐµÐµ Ð¼ÐµÐ»ÐºÐ¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹.


"""


def max_sliding_window_naive(sequence, m):
    maximums = []
    for i in range(len(sequence) - m + 1):
        maximums.append(max(sequence[i:i + m]))
    return maximums


# def max_sliding_window(sequence, m):
#     maximums = []
#     for i in range(len(sequence) - m + 1):
#         maximums.append(max(sequence[: m]))
#         sequence.pop(0)
#     return maximums


def max_sliding_window_deque_idx(sequence, m):
    tmp_deque = deque()

    maximums = []

    for i in range(m):
        new_elem = sequence[i]
        while (len(tmp_deque) > 0) and (sequence[tmp_deque[-1]] < new_elem):
            tmp_deque.pop()
        tmp_deque.append(i)

    for i in range(m, len(sequence)):
        maximums.append(sequence[tmp_deque[0]])

        new_elem = sequence[i]

        while (len(tmp_deque) > 0) and (tmp_deque[0] <= (i - m)):
            tmp_deque.popleft()

        while (len(tmp_deque) > 0) and (sequence[tmp_deque[-1]] < new_elem):
            tmp_deque.pop()

        tmp_deque.append(i)

    maximums.append(sequence[tmp_deque[0]])

    return maximums


if __name__ == '__main__':
    n = int(input())
    input_sequence = [int(i) for i in input().split()]
    # input_sequence = StackWithMax()
    # for i in input().split():
    #     input_sequence.Push(int(i))
    # assert len(input_sequence) == n
    window_size = int(input())

    # print(*max_sliding_window_naive(input_sequence, window_size))
    print(*max_sliding_window_deque_idx(input_sequence, window_size))

